From 2d10c3fbf876db5ab866e474efae3f6227730329 Mon Sep 17 00:00:00 2001
From: Hua Huang <hua_huang@xyratex.com>
Date: Sat, 22 Dec 2012 08:28:52 +0800
Subject: [PATCH 06/10] return error code from server.

---
 m0t1fs/linux_kernel/file.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/m0t1fs/linux_kernel/file.c b/m0t1fs/linux_kernel/file.c
index 36da82e..7055c52 100644
--- a/m0t1fs/linux_kernel/file.c
+++ b/m0t1fs/linux_kernel/file.c
@@ -2912,7 +2912,7 @@ last:
 		goto again;
 
 	M0_LEAVE();
-	return count;
+	return rc != 0 ? rc : count;
 }
 
 static struct m0_indexvec *indexvec_create(unsigned long       seg_nr,
-- 
1.8.3.2

