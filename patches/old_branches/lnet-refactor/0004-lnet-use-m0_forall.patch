From 8da9046ec4348557f637873063b23ea07ec55f3d Mon Sep 17 00:00:00 2001
From: "Valery V. Vorotyntsev" <valery_vorotyntsev@xyratex.com>
Date: Fri, 12 Jul 2013 16:57:31 +0300
Subject: [PATCH 04/14] lnet: use m0_forall()

---
 net/lnet/lnet_tm.c | 10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)

diff --git a/net/lnet/lnet_tm.c b/net/lnet/lnet_tm.c
index ea9be43..d763fa7 100644
--- a/net/lnet/lnet_tm.c
+++ b/net/lnet/lnet_tm.c
@@ -24,14 +24,10 @@
    @{
  */
 
-static inline bool all_tm_queues_are_empty(struct m0_net_transfer_mc *tm)
+static inline bool all_tm_queues_are_empty(const struct m0_net_transfer_mc *tm)
 {
-	int i;
-
-	for (i = 0; i < ARRAY_SIZE(tm->ntm_q); ++i)
-		if (!m0_net_tm_tlist_is_empty(&tm->ntm_q[i]))
-			return false;
-	return true;
+	return m0_forall(i, ARRAY_SIZE(tm->ntm_q),
+			 m0_net_tm_tlist_is_empty(&tm->ntm_q[i]));
 }
 
 /**
-- 
1.8.3.2

