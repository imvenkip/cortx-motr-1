From 9f31e3b00cb16763a704f475430c76f99034c511 Mon Sep 17 00:00:00 2001
From: Mandar Sawant <mandar_sawant@xyratex.com>
Date: Tue, 25 Feb 2014 17:06:49 +0530
Subject: [PATCH 4/8] be.conv.conf, - Add documentation. - Remove conf/db.c
 (none of the file contents are used anymore).

---
 conf/preload.c | 30 +++++++++++++++++-------------
 1 file changed, 17 insertions(+), 13 deletions(-)

diff --git a/conf/preload.c b/conf/preload.c
index 08b65a3..5bacc3a 100644
--- a/conf/preload.c
+++ b/conf/preload.c
@@ -35,6 +35,10 @@
 #include "be/alloc.h"
 #include "be/op.h"
 
+/*
+ * Contains BE segment memory allocation details corresponding to the
+ * configuration object struct confx_ctx::cc_confx.
+ */
 struct confx_ctx {
 	void                *cc_ptr;
 	m0_bcount_t          cc_total;
@@ -103,10 +107,10 @@ M0_INTERNAL void m0_confx_free(struct m0_confx *enc, struct m0_be_seg *seg)
 
 static size_t confstr_to_obj_size(const char *s)
 {
-	int slen = 0;
-	uint32_t type;
-	uint32_t nr_confx_obj;
-	size_t obj_size = 0;
+	int                   slen = 0;
+	uint32_t              type;
+	uint32_t              nr_confx_obj;
+	size_t                obj_size = 0;
 	static const uint32_t conf_objtype_size[M0_CO_NR] = {
 			[M0_CO_DIR]     = 0,
 			[M0_CO_PROFILE] = sizeof(struct m0_confx_profile),
@@ -117,15 +121,15 @@ static size_t confstr_to_obj_size(const char *s)
 			[M0_CO_SDEV] = sizeof(struct m0_confx_sdev),
 			[M0_CO_PARTITION] = sizeof(struct m0_confx_partition)
 	};
-        static const char structure[M0_XA_NR][M0_XCODE_CURSOR_NR] = {
-                               /* NONE  PRE   IN POST */
-                [M0_XA_RECORD]   = { 0, '(',   0, ')' },
-                [M0_XA_UNION]    = { 0, '{',   0, '}' },
-                [M0_XA_SEQUENCE] = { 0, '[',   0, ']' },
-                [M0_XA_TYPEDEF]  = { 0,   0,   0,   0 },
-                [M0_XA_OPAQUE]   = { 0,   0,   0,   0 },
-                [M0_XA_ATOM]     = { 0,   0,   0,   0 }
-        };
+	static const char structure[M0_XA_NR][M0_XCODE_CURSOR_NR] = {
+					/* NONE  PRE   IN POST */
+			[M0_XA_RECORD]   = { 0, '(',   0, ')' },
+			[M0_XA_UNION]    = { 0, '{',   0, '}' },
+			[M0_XA_SEQUENCE] = { 0, '[',   0, ']' },
+			[M0_XA_TYPEDEF]  = { 0,   0,   0,   0 },
+			[M0_XA_OPAQUE]   = { 0,   0,   0,   0 },
+			[M0_XA_ATOM]     = { 0,   0,   0,   0 }
+	};
 
 	/* calculate number of struct m0_confx_obj objects. */
 	if (*s != '\0' && *s == '[') {
-- 
1.8.3.2

