From fbe9d3396bb35bb5281e670c7038f980c4db0bcf Mon Sep 17 00:00:00 2001
From: Maxim Medved <Max_Medved@xyratex.com>
Date: Thu, 14 Feb 2013 16:09:37 +0200
Subject: [PATCH 69/79] added 'clients' or 'servers' prefix to net-test console
 parsable output

---
 net/test/user_space/console_u.c | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

diff --git a/net/test/user_space/console_u.c b/net/test/user_space/console_u.c
index 4e47c3f..2ffe4b4 100644
--- a/net/test/user_space/console_u.c
+++ b/net/test/user_space/console_u.c
@@ -135,7 +135,6 @@ DESCRIBE(concurrency_client,   'e', "Test client concurrency");
  */
 static bool produce_parsable_output = true;
 
-/** Console printf */
 static bool addr_check(const char *addr)
 {
 	if (addr == NULL)
@@ -504,8 +503,10 @@ static void print_status_data_v(struct m0_net_test_cmd_status_data *sd)
 	print_status_data_implementation(sd, false);
 }
 
-static void print_status_data_parsable(struct m0_net_test_cmd_status_data *sd)
+static void print_status_data_parsable(const char *prefix,
+				       struct m0_net_test_cmd_status_data *sd)
 {
+	printf("%s ", prefix);
 	print_status_data_implementation(sd, true);
 	printf("time_start = %lu ", sd->ntcsd_time_start);
 	printf("time_finish = %lu\n", sd->ntcsd_time_finish);
@@ -581,8 +582,10 @@ static int console_run(struct m0_net_test_console_ctx *ctx)
 	print_status_data_v(ctx->ntcc_servers.ntcrc_sd);
 	m0_net_test_u_printf_verbose = verbose;
 	if (produce_parsable_output) {
-		print_status_data_parsable(ctx->ntcc_clients.ntcrc_sd);
-		print_status_data_parsable(ctx->ntcc_servers.ntcrc_sd);
+		print_status_data_parsable("clients",
+					   ctx->ntcc_clients.ntcrc_sd);
+		print_status_data_parsable("servers",
+					   ctx->ntcc_servers.ntcrc_sd);
 	}
 	return 0;
 }
-- 
1.8.3.2

