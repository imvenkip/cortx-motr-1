From 8b9532db21621ae5b75d90d6d78ce918518c2bf1 Mon Sep 17 00:00:00 2001
From: Maxim Medved <Max_Medved@xyratex.com>
Date: Thu, 14 Feb 2013 16:25:51 +0200
Subject: [PATCH 70/79] s/b/B/ for byte, used IEC binary prefixes for 2^[1-6]0
 bytes in net-test output

---
 net/test/user_space/common_u.c | 33 +++++++++++++++++----------------
 1 file changed, 17 insertions(+), 16 deletions(-)

diff --git a/net/test/user_space/common_u.c b/net/test/user_space/common_u.c
index dc6b2f4..4c1b298 100644
--- a/net/test/user_space/common_u.c
+++ b/net/test/user_space/common_u.c
@@ -78,15 +78,16 @@ void m0_net_test_u_print_time(char *name, m0_time_t time)
 void m0_net_test_u_print_bsize(double bsize)
 {
 	/*
-	 * 012345
-	 *    1b
-	 * 1022b
-	 * 1.00kB
-	 * 9.99kB
-	 * 10.0kB
-	 * 99.9kB
-	 *  100kB
-	 * 1024kB
+	 * 0123456
+	 *    1B
+	 * 1023B
+	 * 1.00KiB
+	 * 9.99KiB
+	 * 10.0KiB
+	 * 99.9KiB
+	 *  100KiB
+	 * 1023KiB
+	 * 1.00MiB
 	 */
 	char *fmt;
 	int   i;
@@ -94,16 +95,16 @@ void m0_net_test_u_print_bsize(double bsize)
 		unsigned long  max;
 		char	      *name;
 	}     suffix[] = {
-		{ .max = 1ul << 20, .name = "kB" },
-		{ .max = 1ul << 30, .name = "MB" },
-		{ .max = 1ul << 40, .name = "GB" },
-		{ .max = 1ul << 50, .name = "TB" },
-		{ .max = 1ul << 60, .name = "PB" },
-		{ .max = ULONG_MAX, .name = "EB" },
+		{ .max = 1ul << 20, .name = "KiB" },
+		{ .max = 1ul << 30, .name = "MiB" },
+		{ .max = 1ul << 40, .name = "GiB" },
+		{ .max = 1ul << 50, .name = "TiB" },
+		{ .max = 1ul << 60, .name = "PiB" },
+		{ .max = ULONG_MAX, .name = "EiB" },
 	};
 
 	if (bsize < 1023.5) {
-		m0_net_test_u_printf("%4db ", (int) bsize);
+		m0_net_test_u_printf("%4dB  ", (int) bsize);
 	} else {
 		for (i = 0; i < ARRAY_SIZE(suffix) - 1; ++i) {
 			if (bsize < suffix[i].max - .5)
-- 
1.8.3.2

