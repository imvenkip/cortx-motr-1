From 5e6d34d57ed07dc95c6184027f1965d3dd0cab09 Mon Sep 17 00:00:00 2001
From: "Valery V. Vorotyntsev" <valery_vorotyntsev@xyratex.com>
Date: Thu, 16 Aug 2012 20:31:21 +0300
Subject: [PATCH 317/370] conf/ut/obj.c: add a stub of conf_obj_ut

---
 conf/ut/Makefile.am |  2 +-
 conf/ut/obj.c       | 43 ++++++++++++++++++++++++++++++++++++++
 utils/Makefile.am   | 60 ++++++++++++++++++++++++++---------------------------
 utils/ut_main.c     |  2 ++
 4 files changed, 76 insertions(+), 31 deletions(-)
 create mode 100644 conf/ut/obj.c

diff --git a/conf/ut/Makefile.am b/conf/ut/Makefile.am
index e1b96b2..25bd4d4 100644
--- a/conf/ut/Makefile.am
+++ b/conf/ut/Makefile.am
@@ -1,2 +1,2 @@
 noinst_LTLIBRARIES    = libconf-ut.la
-libconf_ut_la_SOURCES = reg.c
+libconf_ut_la_SOURCES = obj.c reg.c
diff --git a/conf/ut/obj.c b/conf/ut/obj.c
new file mode 100644
index 0000000..75f9996
--- /dev/null
+++ b/conf/ut/obj.c
@@ -0,0 +1,43 @@
+/* -*- c -*- */
+/*
+ * COPYRIGHT 2012 XYRATEX TECHNOLOGY LIMITED
+ *
+ * THIS DRAWING/DOCUMENT, ITS SPECIFICATIONS, AND THE DATA CONTAINED
+ * HEREIN, ARE THE EXCLUSIVE PROPERTY OF XYRATEX TECHNOLOGY
+ * LIMITED, ISSUED IN STRICT CONFIDENCE AND SHALL NOT, WITHOUT
+ * THE PRIOR WRITTEN PERMISSION OF XYRATEX TECHNOLOGY LIMITED,
+ * BE REPRODUCED, COPIED, OR DISCLOSED TO A THIRD PARTY, OR
+ * USED FOR ANY PURPOSE WHATSOEVER, OR STORED IN A RETRIEVAL SYSTEM
+ * EXCEPT AS ALLOWED BY THE TERMS OF XYRATEX LICENSES AND AGREEMENTS.
+ *
+ * YOU SHOULD HAVE RECEIVED A COPY OF XYRATEX'S LICENSE ALONG WITH
+ * THIS RELEASE. IF NOT PLEASE CONTACT A XYRATEX REPRESENTATIVE
+ * http://www.xyratex.com/contact
+ *
+ * Original author: Valery V. Vorotyntsev <valery_vorotyntsev@xyratex.com>
+ * Original creation date: 26-Jul-2012
+ */
+
+#ifdef HAVE_CONFIG_H
+#  include "config.h"
+#endif
+/* #include "conf/obj_ops.c" */
+#include "lib/ut.h"
+
+#if 0 /*XXX*/
+static void test_XXX(void)
+{
+	XXX;
+}
+#endif /*XXX*/
+
+const struct c2_test_suite conf_obj_ut = {
+	.ts_name  = "conf-obj-ut",
+	.ts_init  = NULL,
+	.ts_fini  = NULL,
+	.ts_tests = {
+		/* { "conf-obj-XXX", test_XXX }, */
+		{ NULL, NULL }
+	}
+};
+C2_EXPORTED(conf_obj_ut);
diff --git a/utils/Makefile.am b/utils/Makefile.am
index 9bec552..3559a38 100644
--- a/utils/Makefile.am
+++ b/utils/Makefile.am
@@ -6,41 +6,41 @@ libstob_ut   = $(top_builddir)/stob/ut/libstob-ut.la
 
 ut_SOURCES   = ut_main.c common.c common.h
 ut_LDFLAGS   = -pthread
-ut_LDADD     = $(top_builddir)/colibri/libcolibri.la \
-               $(top_builddir)/lib/ut/libc2-ut.la $(libstob_ut) \
-               $(top_builddir)/cob/ut/libcob-ut.la     \
-               $(top_builddir)/db/ut/libdb-ut.la     \
-               $(top_builddir)/console/ut/libconsole-ut.la     \
-               $(top_builddir)/fol/ut/libfol-ut.la   \
-               $(top_builddir)/fop/ut/libfop-ut.la   \
-               $(top_builddir)/layout/ut/liblayout-ut.la \
-               $(top_builddir)/sns/ut/libparity-ut.la \
-               $(top_builddir)/net/ut/libnet-ut.la \
+ut_LDADD     = $(top_builddir)/colibri/libcolibri.la                     \
+               $(top_builddir)/lib/ut/libc2-ut.la $(libstob_ut)          \
+               $(top_builddir)/cob/ut/libcob-ut.la                       \
+               $(top_builddir)/db/ut/libdb-ut.la                         \
+               $(top_builddir)/console/ut/libconsole-ut.la               \
+               $(top_builddir)/fol/ut/libfol-ut.la                       \
+               $(top_builddir)/fop/ut/libfop-ut.la                       \
+               $(top_builddir)/layout/ut/liblayout-ut.la                 \
+               $(top_builddir)/sns/ut/libparity-ut.la                    \
+               $(top_builddir)/net/ut/libnet-ut.la                       \
                $(top_builddir)/net/bulk_emulation/ut/libnet-bulkem-ut.la \
-               $(top_builddir)/net/lnet/ut/liblnet-ut.la \
-               $(top_builddir)/udb/ut/libudb-ut.la \
-	       $(top_builddir)/capa/ut/libcapa-ut.la \
-               $(top_builddir)/sm/ut/libsm-ut.la \
-               $(top_builddir)/xcode/ut/libxcode-ut.la \
-               $(top_builddir)/reqh/ut/libreqh-ut.la \
-               $(top_builddir)/colibri/ut/libcs-ut.la \
-               $(top_builddir)/rpc/ut/librpc-ut.la \
-               $(top_builddir)/ioservice/ut/libioservice-ut.la \
-               $(top_builddir)/yaml2db/ut/libyaml2db-ut.la \
-	       $(top_builddir)/addb/ut/libaddb-ut.la \
-	       $(top_builddir)/balloc/ut/libballoc-ut.la \
-	       $(top_builddir)/fop/ut/long_lock/libfop-lock-ut.la \
-	       $(top_builddir)/conf/ut/libconf-ut.la
+               $(top_builddir)/net/lnet/ut/liblnet-ut.la                 \
+               $(top_builddir)/udb/ut/libudb-ut.la                       \
+               $(top_builddir)/capa/ut/libcapa-ut.la                     \
+               $(top_builddir)/sm/ut/libsm-ut.la                         \
+               $(top_builddir)/xcode/ut/libxcode-ut.la                   \
+               $(top_builddir)/reqh/ut/libreqh-ut.la                     \
+               $(top_builddir)/colibri/ut/libcs-ut.la                    \
+               $(top_builddir)/rpc/ut/librpc-ut.la                       \
+               $(top_builddir)/ioservice/ut/libioservice-ut.la           \
+               $(top_builddir)/yaml2db/ut/libyaml2db-ut.la               \
+               $(top_builddir)/addb/ut/libaddb-ut.la                     \
+               $(top_builddir)/balloc/ut/libballoc-ut.la                 \
+               $(top_builddir)/fop/ut/long_lock/libfop-lock-ut.la        \
+               $(top_builddir)/conf/ut/libconf-ut.la
 
 ub_SOURCES   = ub_main.c common.c common.h
 ub_LDFLAGS   = -pthread
-ub_LDADD     = $(top_builddir)/colibri/libcolibri.la \
+ub_LDADD     = $(top_builddir)/colibri/libcolibri.la            \
                $(top_builddir)/lib/ut/libc2-ut.la $(libstob_ut) \
-               $(top_builddir)/db/ut/libdb-ut.la     \
-               $(top_builddir)/cob/ut/libcob-ut.la     \
-               $(top_builddir)/fol/ut/libfol-ut.la   \
+               $(top_builddir)/db/ut/libdb-ut.la                \
+               $(top_builddir)/cob/ut/libcob-ut.la              \
+               $(top_builddir)/fol/ut/libfol-ut.la              \
                $(top_builddir)/sns/ut/libparity-ut.la
 
 EXTRA_DIST   = ut.sh.in linux_kernel/main.c linux_kernel/ut.sh.in  \
-	       linux_kernel/c2ctl.c linux_kernel/finject_debugfs.c \
-	       linux_kernel/finject_debugfs.h
+               linux_kernel/c2ctl.c linux_kernel/finject_debugfs.c \
+               linux_kernel/finject_debugfs.h
diff --git a/utils/ut_main.c b/utils/ut_main.c
index cb75ced..03984a6 100644
--- a/utils/ut_main.c
+++ b/utils/ut_main.c
@@ -47,6 +47,7 @@ extern const struct c2_test_suite cfm_ut;
 extern const struct c2_test_suite cob_ut;
 extern const struct c2_test_suite cobfoms_ut;
 extern const struct c2_test_suite colibri_setup_ut;
+extern const struct c2_test_suite conf_obj_ut;
 extern const struct c2_test_suite conf_reg_ut;
 extern const struct c2_test_suite console_ut;
 extern const struct c2_test_suite db_cursor_ut;
@@ -92,6 +93,7 @@ void add_uts(void)
 	c2_ut_add(&cob_ut);
 	c2_ut_add(&cobfoms_ut);
 	c2_ut_add(&colibri_setup_ut);
+	c2_ut_add(&conf_obj_ut);
 	c2_ut_add(&conf_reg_ut);
 	c2_ut_add(&db_cursor_ut);
 	c2_ut_add(&db_ut);
-- 
1.8.3.2

