From 214ea098bc53c12e58b31093025302a596fd7eeb Mon Sep 17 00:00:00 2001
From: "Valery V. Vorotyntsev" <valery_vorotyntsev@xyratex.com>
Date: Thu, 30 Aug 2012 21:28:13 +0300
Subject: [PATCH 345/370] conf: use "compound literal" extension in
 test_obj_new()

---
 conf/ut/obj.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/conf/ut/obj.c b/conf/ut/obj.c
index f67f150..23833fe 100644
--- a/conf/ut/obj.c
+++ b/conf/ut/obj.c
@@ -26,16 +26,16 @@
 #include "lib/buf.h"
 #include "lib/ut.h"
 
-static void test_new(void)
+static void test_obj_new(void)
 {
 	struct c2_conf_obj *obj;
 	struct c2_conf_reg  reg;
 	int                 rc;
-	struct c2_buf       buf = C2_BUF_INITS("profile");
 
 	c2_conf_reg_init(&reg);
 
-	obj = c2_conf_obj_new(C2_CO_PROFILE, &buf /* XXX inline ctor? */);
+	obj = c2_conf_obj_new(C2_CO_PROFILE,
+			      &(const struct c2_buf)C2_BUF_INITS("profile"));
 	C2_UT_ASSERT(obj != NULL);
 
 	/* XXX TODO: check generic fields */
@@ -56,7 +56,7 @@ const struct c2_test_suite conf_obj_ut = {
 	.ts_init  = NULL,
 	.ts_fini  = NULL,
 	.ts_tests = {
-		{ "conf-obj", test_new },
+		{ "conf-obj-new", test_obj_new },
 		{ NULL, NULL }
 	}
 };
-- 
1.8.3.2

