From e8eb1bc20aee2e8c736a02ada01edaa11dcd6204 Mon Sep 17 00:00:00 2001
From: "Valery V. Vorotyntsev" <valery_vorotyntsev@xyratex.com>
Date: Mon, 27 Aug 2012 15:15:00 +0300
Subject: [PATCH 329/370] conf: remove anonymous struct around magic fields

RB: r/981/diff/1-2/?file=27287#file27287line224
---
 conf/obj_ops.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/conf/obj_ops.c b/conf/obj_ops.c
index 27255a4..4148c1e 100644
--- a/conf/obj_ops.c
+++ b/conf/obj_ops.c
@@ -60,15 +60,14 @@ enum {
 
 static const struct c2_bob_type generic_obj_bob = {
 	.bt_name         = "c2_conf_obj",
-	.bt_magix_offset = C2_MAGIX_OFFSET(struct c2_conf_obj,
-					   co_magic.generic),
+	.bt_magix_offset = C2_MAGIX_OFFSET(struct c2_conf_obj, co_gen_magic),
 	.bt_magix        = CONF_GENERIC_MAGIC,
 	.bt_check        = generic_obj_invariant
 };
 C2_BOB_DEFINE(static, &generic_obj_bob, c2_conf_obj);
 
 C2_TL_DESCR_DEFINE(generic_objs, "c2_conf_obj-s", static, struct c2_conf_obj,
-		   co_linkage, co_magic.generic, CONF_GENERIC_MAGIC,
+		   co_linkage, co_gen_magic, CONF_GENERIC_MAGIC,
 		   CONF_DIR_MAGIC);
 C2_TL_DEFINE(generic_objs, static, struct c2_conf_obj);
 
@@ -88,7 +87,7 @@ const struct c2_bob_type c2_conf_ ## abbrev ## _bob = {            \
 	.bt_magix_offset =                                         \
 		C2_MAGIX_OFFSET(struct c2_conf_ ## abbrev,         \
 				c2_conf_ ## abbrev ## _cast_field. \
-					co_magic.concrete),        \
+					co_con_magic),             \
 	.bt_magix = magic,                                         \
 	.bt_check = abbrev ## _invariant                           \
 }
-- 
1.8.3.2

