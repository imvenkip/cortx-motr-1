From 4bad738ee3e64b7fd8d74974f5f8a1851205cce4 Mon Sep 17 00:00:00 2001
From: "Valery V. Vorotyntsev" <valery_vorotyntsev@xyratex.com>
Date: Sun, 18 Mar 2012 22:48:07 +0200
Subject: [PATCH 074/311] conf: delete C2_EXPORTED() lines

Configuration modules do not export kernel symbols.

Reviewed-on: http://reviewboard.clusterstor.com/r/714/
Reported-by: Nikita Danilov <nikita_danilov@xyratex.com>
---
 conf/buf.c     | 2 --
 conf/confc.c   | 9 +--------
 conf/map.c     | 1 -
 conf/obj_ops.c | 3 ---
 conf/path.c    | 1 -
 5 files changed, 1 insertion(+), 15 deletions(-)

diff --git a/conf/buf.c b/conf/buf.c
index 1f28fa3..5ce8566 100644
--- a/conf/buf.c
+++ b/conf/buf.c
@@ -29,7 +29,6 @@ bool c2_conf_buf_eq(const struct c2_conf_buf *x, const struct c2_conf_buf *y)
 	return x->cb_size == y->cb_size
 		&& memcmp(x->cb_data, y->cb_data, x->cb_size) == 0;
 }
-C2_EXPORTED(c2_conf_buf_eq);
 
 int c2_conf_buf_copy(struct c2_conf_buf *dest, const struct c2_conf_buf *src)
 {
@@ -41,4 +40,3 @@ int c2_conf_buf_copy(struct c2_conf_buf *dest, const struct c2_conf_buf *src)
 	memcpy(dest->cb_data, src->cb_data, src->cb_size);
 	return 0;
 }
-C2_EXPORTED(c2_conf_buf_copy);
diff --git a/conf/confc.c b/conf/confc.c
index d2534cf..45e82d1 100644
--- a/conf/confc.c
+++ b/conf/confc.c
@@ -23,7 +23,7 @@
 #endif
 #include "conf/confc.h"
 #include "conf/cache.h"  /* c2_conf_cache */
-#include "lib/cdefs.h"   /* C2_EXPORTED, container_of, C2_HAS_TYPE, equi */
+#include "lib/cdefs.h"   /* container_of, C2_HAS_TYPE, equi */
 #include "lib/arith.h"   /* C2_CNT_INC, C2_CNT_DEC */
 #include "lib/time.h"    /* C2_TIME_NEVER */
 #include "lib/misc.h"    /* memcpy */
@@ -330,7 +330,6 @@ void c2_confc_ctx_init(struct c2_confc_ctx *ctx)
 	c2_clink_init(&ctx->fc_clink, on_unpinned);
 	C2_POST(ctx_invariant(ctx));
 }
-C2_EXPORTED(c2_confc_ctx_init);
 
 void c2_confc_ctx_fini(struct c2_confc_ctx *ctx)
 {
@@ -339,7 +338,6 @@ void c2_confc_ctx_fini(struct c2_confc_ctx *ctx)
 	c2_chan_fini(&ctx->fc_complete);
 	c2_sm_fini(&ctx->fc_mach);
 }
-C2_EXPORTED(c2_confc_ctx_fini);
 
 static enum c2_conf_status
 list_status(const struct c2_tl_descr *descr, const struct c2_tl *list)
@@ -579,7 +577,6 @@ int c2_confc_init(const char *profile, const char *confd_addr,
 	 */
 	XXX;
 }
-C2_EXPORTED(c2_confc_init);
 
 void c2_confc_fini(void)
 {
@@ -606,7 +603,6 @@ void c2_confc_fini(void)
 	 */
 	XXX;
 }
-C2_EXPORTED(c2_confc_fini);
 
 int c2_confc_open(struct c2_confc_ctx *ctx, struct c2_conf_obj *path_origin,
 		  const struct c2_conf_pathcomp *path, size_t path_len)
@@ -630,7 +626,6 @@ int c2_confc_open(struct c2_confc_ctx *ctx, struct c2_conf_obj *path_origin,
 	ast_state_set(&ctx->fc_ast, S_CHECK);
 	return 0;
 }
-C2_EXPORTED(c2_confc_open);
 
 void * c2_confc_open_sync(struct c2_conf_obj *path_origin,
 			  const struct c2_conf_pathcomp *path, size_t path_len)
@@ -652,7 +647,6 @@ void * c2_confc_open_sync(struct c2_conf_obj *path_origin,
 	c2_confc_ctx_fini(&ctx);
 	return ret;
 }
-C2_EXPORTED(c2_confc_open_sync);
 
 void c2_confc_close(void *obj)
 {
@@ -664,7 +658,6 @@ void c2_confc_close(void *obj)
 		c2_chan_broadcast(&x->co_chan);
 	c2_mutex_unlock(cache_lock());
 }
-C2_EXPORTED(c2_confc_close);
 
 /** Collection of configuration objects. */
 struct c2_confc_dir {
diff --git a/conf/map.c b/conf/map.c
index a562fb6..eb8ae99 100644
--- a/conf/map.c
+++ b/conf/map.c
@@ -42,4 +42,3 @@ int c2_conf_map_init(struct c2_conf_map *map)
 	 */
 	XXX;
 }
-C2_EXPORTED(c2_conf_map_init);
diff --git a/conf/obj_ops.c b/conf/obj_ops.c
index b198fb9..d80ae5a 100644
--- a/conf/obj_ops.c
+++ b/conf/obj_ops.c
@@ -84,7 +84,6 @@ c2_conf_obj_new(enum c2_conf_objtype type, const struct c2_conf_buf *key)
 	}
 	return ret;
 }
-C2_EXPORTED(c2_conf_obj_new);
 
 bool c2_conf_obj_mismatch(const struct c2_conf_obj *cached,
 			  const struct confx_object *onwire)
@@ -99,7 +98,6 @@ bool c2_conf_obj_mismatch(const struct c2_conf_obj *cached,
 	C2_ASSERT(IS_IN_ARRAY(cached->co_type, obj_ops));
 	return !obj_ops[cached->co_type].oo_equal(a, b);
 }
-C2_EXPORTED(c2_conf_obj_mismatch);
 
 int c2_conf_obj_fill(struct c2_conf_obj *dest, const struct confx_object *src,
 		     struct c2_conf_map *registry)
@@ -118,4 +116,3 @@ int c2_conf_obj_fill(struct c2_conf_obj *dest, const struct confx_object *src,
 	 */
 	XXX;
 }
-C2_EXPORTED(c2_conf_obj_fill);
diff --git a/conf/path.c b/conf/path.c
index df5c6d7..093152e 100644
--- a/conf/path.c
+++ b/conf/path.c
@@ -96,4 +96,3 @@ const struct c2_conf_relation * c2_conf_downlink(uint32_t src, uint32_t tgt)
 	}
 	return NULL;
 }
-C2_EXPORTED(c2_conf_downlink);
-- 
1.8.3.2

