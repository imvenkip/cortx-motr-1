From 7d36f1bf297fb49b865a1918f4ff4485916891cb Mon Sep 17 00:00:00 2001
From: Maxim Medved <Max_Medved@xyratex.com>
Date: Thu, 28 Nov 2013 07:35:27 -0800
Subject: [PATCH 11/13] mero: fixed compile error with disabled asserts

---
 balloc/balloc.c   | 2 +-
 dtm/ltx.c         | 1 +
 dtm/nucleus.c     | 1 +
 dtm/operation.c   | 1 +
 sns/cm/cm_utils.c | 2 +-
 5 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/balloc/balloc.c b/balloc/balloc.c
index cb0cb28..d81e207 100644
--- a/balloc/balloc.c
+++ b/balloc/balloc.c
@@ -1084,7 +1084,7 @@ static int balloc_alloc_db_update(struct m0_balloc *mero,
 	struct m0_be_btree	*db	= &mero->cb_db_group_extents;
 	struct m0_buf		 key;
 	struct m0_buf		 val;
-	struct m0_ext		*cur;
+	struct m0_ext		*cur = NULL;
 	m0_bcount_t		 i;
 	int			 rc	= 0;
 	m0_bcount_t              maxchunk = grp->bgi_maxchunk;
diff --git a/dtm/ltx.c b/dtm/ltx.c
index 3b68204..658ccc7 100644
--- a/dtm/ltx.c
+++ b/dtm/ltx.c
@@ -82,6 +82,7 @@ static int ltx_find(struct m0_dtm *dtm, const struct m0_dtm_history_type *ht,
 		    struct m0_dtm_history **out)
 {
 	M0_IMPOSSIBLE("Looking for ltx?");
+	return 0;
 }
 
 static const struct m0_dtm_history_type_ops ltx_htype_ops = {
diff --git a/dtm/nucleus.c b/dtm/nucleus.c
index b90ef98..0db0bbc 100644
--- a/dtm/nucleus.c
+++ b/dtm/nucleus.c
@@ -356,6 +356,7 @@ static int up_cmp(const struct m0_dtm_up *up, m0_dtm_ver_t hver)
 	case M0_DUR_APP:
 	default:
 		M0_IMPOSSIBLE("Impossible rule.");
+		return 0;
 	}
 }
 
diff --git a/dtm/operation.c b/dtm/operation.c
index 192b839..d3bcac0 100644
--- a/dtm/operation.c
+++ b/dtm/operation.c
@@ -275,6 +275,7 @@ M0_INTERNAL bool oper_update_unique(const struct m0_dtm_oper *oper,
 			return false;
 	} oper_endfor;
 	M0_IMPOSSIBLE("Missing update.");
+	return false;
 }
 
 M0_INTERNAL void oper_lock(const struct m0_dtm_oper *oper)
diff --git a/sns/cm/cm_utils.c b/sns/cm/cm_utils.c
index a35d938..bb685b8 100644
--- a/sns/cm/cm_utils.c
+++ b/sns/cm/cm_utils.c
@@ -252,7 +252,7 @@ M0_INTERNAL bool m0_sns_cm_unit_is_spare(const struct m0_sns_cm *scm,
 	struct m0_fid               cobfid;
 	struct m0_pdclust_src_addr  sa;
 	struct m0_pdclust_tgt_addr  ta;
-	struct m0_pdclust_instance *pi;
+	struct m0_pdclust_instance *pi = NULL;
 	enum m0_pool_nd_state       state_out;
 	bool                        result = true;
 	int                         rc;
-- 
1.8.3.2

