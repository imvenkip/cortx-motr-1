From 5e45776aa30fd51362570acf55603defb31b3dde Mon Sep 17 00:00:00 2001
From: Rohan Puri <rohan_puri@xyratex.com>
Date: Tue, 9 Jul 2013 13:32:20 +0530
Subject: [PATCH 035/125] ADDB monitoring requires ADDB summary records to be
 sent on wire, so we define new xcode types for them in this file.

---
 addb/addb_monitor_wire.h | 18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)

diff --git a/addb/addb_monitor_wire.h b/addb/addb_monitor_wire.h
index f9b1c9f..63e8b07 100644
--- a/addb/addb_monitor_wire.h
+++ b/addb/addb_monitor_wire.h
@@ -25,7 +25,6 @@
 
 #include "lib/types.h"
 #include "xcode/xcode_attr.h"
-#include "addb/addb_wire.h"
 
 /**
     ADDB Monitor Serializable Data Types
@@ -36,18 +35,21 @@
    @{
  */
 
+/**
+   A serializable sequence of 64 bit integers used by ADDB.
+ */
+struct m0_addb_sum_rec_seq {
+	uint32_t  asrs_nr;   /**< Sequence length */
+	uint64_t *asrs_data; /**< ADDB summary record encoded*/
+} M0_XCA_SEQUENCE;
+
 struct m0_addb_sum_rec_wire {
 	/** This is addb_rec_type:art_id for this ADDB summary record */
-	uint32_t                   asrw_id;
+	uint32_t               asrw_id;
 	/* ADDB summary record data encoded in sequence form */
-	struct m0_addb_uint64_seq asrw_rec;
+	struct m0_addb_sum_req asrw_rec;
 } M0_XCA_RECORD;
 
-struct m0_addb_sum_rec_fop {
-	uint32_t                     asrf_nr;
-	struct m0_addb_sum_rec_wire *asrf_recs;
-} M0_XCA_SEQUENCE;
-
 #endif /* __MERO_ADDB_ADDB_MONITOR_WIRE_H__ */
 
 /*
-- 
1.8.3.2

