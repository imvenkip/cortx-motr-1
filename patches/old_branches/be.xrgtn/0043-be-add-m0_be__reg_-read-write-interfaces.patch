From f449b3ed42cd61e7a487e911cfe9963eee2e2883 Mon Sep 17 00:00:00 2001
From: "Valery V. Vorotyntsev" <valery_vorotyntsev@xyratex.com>
Date: Wed, 29 May 2013 16:47:59 +0300
Subject: [PATCH 043/228] be: add m0_be__reg_{read,write}() interfaces

---
 be/seg.c | 16 ++++++++++++++--
 be/seg.h |  6 ++++++
 2 files changed, 20 insertions(+), 2 deletions(-)

diff --git a/be/seg.c b/be/seg.c
index b46e1e1..56d4ce0 100644
--- a/be/seg.c
+++ b/be/seg.c
@@ -18,7 +18,9 @@
  * Original creation date: 29-May-2013
  */
 
-#include <sys/mman.h>    /* mmap */
+#ifndef __KERNEL__
+#  include <sys/mman.h>  /* mmap */
+#endif
 #include "be/seg.h"
 #include "lib/assert.h"
 #include "lib/memory.h"  /* m0_alloc_aligned */
@@ -145,7 +147,7 @@ static int stob_io_single_read(void *buf, m0_bcount_t bufsz,
 	struct m0_clink    clink;
 	int                rc;
 
-       	pgsz = 1 << pgshift;
+	pgsz = 1 << pgshift;
 
 	/* Set up io struct for reading. */
 	m0_stob_io_init(&io);
@@ -243,6 +245,16 @@ void m0_be_reg_put(const struct m0_be_reg *reg)
 	M0_PRE(m0_be__reg_invariant(reg));
 }
 
+int m0_be__reg_read(struct m0_be_seg *seg, struct m0_be_op *op,
+		    struct m0_be_reg *regs, m0_bcount_t nr)
+{
+}
+
+int m0_be__reg_write(struct m0_be_seg *seg, struct m0_be_op *op,
+		     struct m0_be_reg *regs, m0_bcount_t nr)
+{
+}
+
 /** @} end of be group */
 /*
  *  Local variables:
diff --git a/be/seg.h b/be/seg.h
index 7efad1e..8c8b005 100644
--- a/be/seg.h
+++ b/be/seg.h
@@ -89,5 +89,11 @@ void m0_be_reg_put(const struct m0_be_reg *reg);
 
 bool m0_be__reg_invariant(const struct m0_be_reg *reg);
 
+int m0_be__reg_read(struct m0_be_seg *seg, struct m0_be_op *op,
+		    struct m0_be_reg *regs, m0_bcount_t nr);
+
+int m0_be__reg_write(struct m0_be_seg *seg, struct m0_be_op *op,
+		     struct m0_be_reg *regs, m0_bcount_t nr);
+
 /** @} end of be group */
 #endif /* __MERO_BE_SEG_H__ */
-- 
1.8.3.2

