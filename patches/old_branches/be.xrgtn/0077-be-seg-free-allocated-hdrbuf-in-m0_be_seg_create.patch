From 85088f9c14d44e81f47b7ae24c10554ef5be1f39 Mon Sep 17 00:00:00 2001
From: Alexander Gattin <alexander_gattin@xyratex.com>
Date: Thu, 30 May 2013 22:16:55 +0300
Subject: [PATCH 077/228] be/seg: free allocated hdrbuf in m0_be_seg_create()

---
 be/seg.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/be/seg.c b/be/seg.c
index 86ed585..cbc3eba 100644
--- a/be/seg.c
+++ b/be/seg.c
@@ -112,6 +112,7 @@ seg_header_create(struct m0_be_seg *seg, void *addr, m0_bcount_t size)
 	rc = stob_io_single_write(hdrbuf, sizeof(struct be_seg_hdr),
 				  seg->bs_stob, BE_SEG_HEADER_OFFSET,
 				  st_block_shift);
+	m0_free(hdrbuf);
 
 	return rc;
 }
-- 
1.8.3.2

