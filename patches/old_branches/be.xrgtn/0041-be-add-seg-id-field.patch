From fea79f37d6e37a7547c56d153775455fcfa8f936 Mon Sep 17 00:00:00 2001
From: "Valery V. Vorotyntsev" <valery_vorotyntsev@xyratex.com>
Date: Wed, 29 May 2013 14:46:11 +0300
Subject: [PATCH 041/228] be: add seg id field

m0_be::b_next_segid, m0_be_seg::bs_id: new fields.
---
 be/be.h  | 2 ++
 be/seg.h | 1 +
 2 files changed, 3 insertions(+)

diff --git a/be/be.h b/be/be.h
index 2f57010..dbfa32b 100644
--- a/be/be.h
+++ b/be/be.h
@@ -34,6 +34,8 @@ struct m0_be {
 	struct m0_be_tx_engine b_tx;
 	struct m0_be_seg       b_seg0;
 	struct m0_be_log      *b_log;
+	/* This value is used to assign m0_be_seg::bs_id. */
+	uint64_t               b_next_segid;
 };
 
 enum m0_be_op_state {
diff --git a/be/seg.h b/be/seg.h
index 30ed879..7efad1e 100644
--- a/be/seg.h
+++ b/be/seg.h
@@ -41,6 +41,7 @@ enum m0_be_seg_states {
 };
 
 struct m0_be_seg {
+	uint64_t               bs_id; /* see also m0_be::b_next_segid */
 	struct m0_stob        *bs_stob;
 	m0_bcount_t            bs_size;
 	void                  *bs_addr;
-- 
1.8.3.2

