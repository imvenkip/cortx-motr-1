From 8de0008e5e218defdcc084d1335820e2d0ccfa93 Mon Sep 17 00:00:00 2001
From: Alexander Gattin <alexander_gattin@xyratex.com>
Date: Wed, 12 Jun 2013 12:27:38 +0300
Subject: [PATCH 146/228] be/tx: use m0_be_tx_credit_init() instead of
 be_tx_credit_init().

---
 be/tx.c | 15 ++++-----------
 1 file changed, 4 insertions(+), 11 deletions(-)

diff --git a/be/tx.c b/be/tx.c
index bd5a6f6..1c00ab6 100644
--- a/be/tx.c
+++ b/be/tx.c
@@ -218,13 +218,6 @@ M0_INTERNAL void m0_be_tx_engine_fini(struct m0_be_tx_engine *engine)
 		  (tx_tlist_fini(&engine->te_txs[i]), true));
 }
 
-static void be_tx_credit_init(struct m0_be_tx_credit *k)
-{
-	M0_PRE(k != NULL);
-	k->tc_reg_nr = 0;
-	k->tc_reg_size = 0;
-}
-
 M0_INTERNAL void m0_be_tx_init(struct m0_be_tx *tx, uint64_t tid,
 			       struct m0_be *be, struct m0_sm_group *tx_grp,
 			       m0_be_tx_cb_t persistent,
@@ -239,10 +232,10 @@ M0_INTERNAL void m0_be_tx_init(struct m0_be_tx *tx, uint64_t tid,
 	tx->t_persistent = persistent;
 	tx->t_discarded  = discarded;
 	tx->t_filler     = filler;
-	be_tx_credit_init(&tx->t_prepared);
-	be_tx_credit_init(&tx->t_captured);
-	be_tx_credit_init(&tx->t_used);
-	be_tx_credit_init(&tx->t_pos);
+	m0_be_tx_credit_init(&tx->t_prepared);
+	m0_be_tx_credit_init(&tx->t_captured);
+	m0_be_tx_credit_init(&tx->t_used);
+	m0_be_tx_credit_init(&tx->t_pos);
 	tx_tlink_init_at(tx, &tx_engine(tx)->te_txs[M0_BTS_INIT]);
 	M0_POST(m0_be__tx_invariant(tx));
 }
-- 
1.8.3.2

