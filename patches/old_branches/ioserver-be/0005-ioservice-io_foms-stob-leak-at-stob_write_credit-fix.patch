From 40e9f52c8bf90bd5fa9b5eb29e12e9e679261d77 Mon Sep 17 00:00:00 2001
From: Andriy Tkachuk <andriy_tkachuk@xyratex.com>
Date: Tue, 24 Sep 2013 19:24:21 +0300
Subject: [PATCH 5/7] ioservice/io_foms: stob leak at stob_write_credit() fixed

---
 ioservice/io_foms.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/ioservice/io_foms.c b/ioservice/io_foms.c
index 65e3a75..16b9632 100644
--- a/ioservice/io_foms.c
+++ b/ioservice/io_foms.c
@@ -1756,8 +1756,9 @@ static void stob_write_credit(struct m0_fom *fom)
 		for (j = 0; j < wire_ivec.ci_nr; j++)
 			++count;
 	}
-	M0_LOG(M0_DEBUG, "blocks=%d", (int)count);
+	M0_LOG(M0_DEBUG, "count=%d", (int)count);
 	m0_stob_write_credit(fom_stdom, count, &fom->fo_tx.tx_betx_cred);
+	m0_stob_put(fom_obj->fcrw_stob);
 }
 
 
-- 
1.8.3.2

