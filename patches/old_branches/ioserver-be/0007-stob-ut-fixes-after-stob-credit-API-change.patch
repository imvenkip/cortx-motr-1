From 8543c2a317293418977d17c6a94e2c4e77aaffeb Mon Sep 17 00:00:00 2001
From: Andriy Tkachuk <andriy_tkachuk@xyratex.com>
Date: Wed, 25 Sep 2013 22:16:52 +0300
Subject: [PATCH 7/7] stob/ut: fixes after stob credit API change

Addon to a701895 change.
---
 stob/ut/ad.c | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

diff --git a/stob/ut/ad.c b/stob/ut/ad.c
index d3e2921..d49725b 100644
--- a/stob/ut/ad.c
+++ b/stob/ut/ad.c
@@ -208,8 +208,8 @@ static int test_ad_init(void)
 
 	m0_dtx_init(&tx, db->bs_domain, sm_grp);
 	dom_fore->sd_ops->sdo_write_credit(dom_fore,
-				buf_size * (NR * NR / 2) /* test_ad() */ +
-				buf_size * NR, /* test_ad_rw_unordered() */
+				(NR * NR / 2) /* test_ad() */ +
+				NR, /* test_ad_rw_unordered() */
 						&tx.tx_betx_cred);
 	result = dom_fore->sd_ops->sdo_tx_make(dom_fore, &tx);
 	M0_ASSERT(result == 0);
@@ -397,8 +397,7 @@ static void test_ad_undo(void)
 	M0_UT_ASSERT(result == 0);
 
 	m0_dtx_init(&tx, db->bs_domain, sm_grp);
-	dom_fore->sd_ops->sdo_write_credit(dom_fore,
-				buf_size * 2, &tx.tx_betx_cred);
+	dom_fore->sd_ops->sdo_write_credit(dom_fore, 2, &tx.tx_betx_cred);
 	result = dom_fore->sd_ops->sdo_tx_make(dom_fore, &tx);
 	M0_UT_ASSERT(result == 0);
 	M0_ASSERT(m0_be_tx_state(&tx.tx_betx) == M0_BTS_ACTIVE);
-- 
1.8.3.2

