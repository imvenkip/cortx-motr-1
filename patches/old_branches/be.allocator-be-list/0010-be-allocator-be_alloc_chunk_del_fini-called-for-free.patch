From 38b9c968804b8d1332536b43d765e165cb3a8c59 Mon Sep 17 00:00:00 2001
From: Maxim Medved <max_medved@xyratex.com>
Date: Fri, 15 Nov 2013 00:58:57 +0200
Subject: [PATCH 10/26] be/allocator: be_alloc_chunk_del_fini() called for free
 chunks only

---
 be/alloc.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/be/alloc.c b/be/alloc.c
index 4312e87..28e2e9a 100644
--- a/be/alloc.c
+++ b/be/alloc.c
@@ -421,8 +421,7 @@ static void be_alloc_chunk_del_fini(struct m0_be_allocator *a,
 				    struct be_alloc_chunk *c)
 {
 	M0_PRE(be_alloc_chunk_invariant(a, c));
-	if (c->bac_free)
-		chunks_free_tlist_del_c(a, tx, c);
+	chunks_free_tlist_del_c(a, tx, c);
 	chunks_all_tlist_del_c(a, tx, c);
 	chunks_free_tlink_fini_c(a, tx, c);
 	chunks_all_tlink_fini_c(a, tx, c);
-- 
1.8.3.2

