From 61789c70529cf7029786f4c0c2e1222b49ca185b Mon Sep 17 00:00:00 2001
From: Maxim Medved <Max_Medved@xyratex.com>
Date: Wed, 21 Aug 2013 15:37:27 +0300
Subject: [PATCH 27/34] db: use m0_be_ut_backend_cfg_default

---
 db/db.c | 11 ++---------
 1 file changed, 2 insertions(+), 9 deletions(-)

diff --git a/db/db.c b/db/db.c
index 9c2c474..c93a383 100644
--- a/db/db.c
+++ b/db/db.c
@@ -60,15 +60,7 @@ struct m0_addb_ctx m0_db_mod_ctx;
 
 static struct m0_sm_group      _db_sm_group;
 static struct m0_be_domain     _db_dom;
-static struct m0_be_domain_cfg _db_cfg = {
-	.bc_engine = {
-		.bec_group_nr = 1,
-		.bec_log_size = 1 << 27,
-		.bec_tx_size_max = M0_BE_TX_CREDIT_INIT(1 << 20, 1 << 26),
-		.bec_group_size_max = M0_BE_TX_CREDIT_INIT(1 << 21, 1 << 27),
-		.bec_group_tx_max = 20
-	},
-};
+static struct m0_be_domain_cfg _db_cfg;
 
 static int ast_start(void)
 {
@@ -90,6 +82,7 @@ M0_INTERNAL int m0_db_domain_init(struct m0_reqh *reqh)
 	if (rc != 0)
 		return rc;
 
+	m0_be_ut_backend_cfg_default(&_db_cfg);
 	_db_cfg.bc_engine.bec_group_fom_reqh = reqh;
         rc = m0_be_domain_init(&_db_dom, &_db_cfg);
 	if (rc != 0)
-- 
1.8.3.2

