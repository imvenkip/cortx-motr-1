From 66485ff39063e82cd28b862bd8d826c967042314 Mon Sep 17 00:00:00 2001
From: "Valery V. Vorotyntsev" <valery_vorotyntsev@xyratex.com>
Date: Wed, 29 May 2013 12:22:12 +0300
Subject: [PATCH 021/290] be: add be/alloc.c to SOURCES targets

+ be/alloc.c: Add dummy implementations.
---
 be/Kbuild.sub                  |  2 +-
 be/Makefile.sub                |  4 ++--
 be/alloc.c                     | 37 ++++++++++++++++++++++++++++++++++---
 utils/linux_kernel/m0ut_main.c |  2 +-
 4 files changed, 38 insertions(+), 7 deletions(-)

diff --git a/be/Kbuild.sub b/be/Kbuild.sub
index b735d89..119b726 100644
--- a/be/Kbuild.sub
+++ b/be/Kbuild.sub
@@ -1 +1 @@
-m0mero_objects += be/seg.o
+m0mero_objects += be/alloc.o be/seg.o
diff --git a/be/Makefile.sub b/be/Makefile.sub
index fba0fbd..89dd4e6 100644
--- a/be/Makefile.sub
+++ b/be/Makefile.sub
@@ -1,3 +1,3 @@
-nobase_mero_include_HEADERS += be/seg.h
+nobase_mero_include_HEADERS += be/alloc.h be/seg.h
 
-mero_libmero_la_SOURCES += be/seg.c
+mero_libmero_la_SOURCES += be/alloc.c be/seg.c
diff --git a/be/alloc.c b/be/alloc.c
index e6fd384..a76b85a 100644
--- a/be/alloc.c
+++ b/be/alloc.c
@@ -18,18 +18,49 @@
  * Original creation date: 29-May-2013
  */
 
-
 /**
- * @addtogroup XXX
+ * @addtogroup be
  *
  * @{
  */
 
+int m0_be_allocator_init(struct m0_be_allocator *a, struct m0_be_seg *seg)
+{
+}
+
+void m0_be_allocator_fini(struct m0_be_allocator *a)
+{
+}
+
+int m0_be_allocator_create(struct m0_be_allocator *a)
+{
+}
+
+int m0_be_allocator_destroy(struct m0_be_allocator *a)
+{
+}
+
+void m0_be_allocator_credit(const struct m0_be_allocator *a,
+			    enum m0_be_allocator_op optype, m0_bcount_t size,
+			    unsigned shift, struct m0_be_tx_credit *accum)
+{
+}
 
+void *m0_be_alloc(struct m0_be_allocator *a, struct m0_be_tx *tx,
+		  m0_bcount_t size, unsigned shift)
+{
+}
 
-/** @} end of XXX group */
+void m0_be_free(struct m0_be_allocator *a, struct m0_be_tx *tx, void *ptr)
+{
+}
 
+void m0_be_alloc_stats(const struct m0_be_allocator *a,
+		       struct m0_be_allocator_stats *out)
+{
+}
 
+/** @} end of be group */
 /*
  *  Local variables:
  *  c-indentation-style: "K&R"
diff --git a/utils/linux_kernel/m0ut_main.c b/utils/linux_kernel/m0ut_main.c
index cb06646..044302e 100644
--- a/utils/linux_kernel/m0ut_main.c
+++ b/utils/linux_kernel/m0ut_main.c
@@ -33,7 +33,7 @@ MODULE_LICENSE("proprietary");
 /* sort test suites in alphabetic order */
 extern const struct m0_test_suite m0_klibm0_ut; /* test lib first */
 extern const struct m0_test_suite m0_addb_ut;
-extern const struct m0_test_suite m0_be_ut;
+extern const struct m0_test_suite be_ut;
 extern const struct m0_test_suite buffer_pool_ut;
 extern const struct m0_test_suite bulkio_client_ut;
 extern const struct m0_test_suite m0_net_bulk_if_ut;
-- 
1.8.3.2

