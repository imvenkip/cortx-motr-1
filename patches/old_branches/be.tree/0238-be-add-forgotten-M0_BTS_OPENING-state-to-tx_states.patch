From aa05dd36275c900fd5e3bb19ff7047a49b5c77d9 Mon Sep 17 00:00:00 2001
From: "Valery V. Vorotyntsev" <valery_vorotyntsev@xyratex.com>
Date: Wed, 26 Jun 2013 17:39:26 +0300
Subject: [PATCH 238/290] be: add forgotten M0_BTS_OPENING state to tx_states[]

---
 be/tx.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

diff --git a/be/tx.c b/be/tx.c
index 16a2208..2fe5991 100644
--- a/be/tx.c
+++ b/be/tx.c
@@ -68,8 +68,16 @@ static struct m0_sm_state_descr tx_states[M0_BTS_NR] = {
 		.sd_in        = NULL,
 		.sd_ex        = NULL,
 		.sd_invariant = tx_state_invariant,
-		.sd_allowed   = M0_BITS(M0_BTS_PREPARE, M0_BTS_ACTIVE,
-					M0_BTS_FAILED),
+		.sd_allowed   = M0_BITS(M0_BTS_PREPARE, M0_BTS_OPENING,
+					M0_BTS_ACTIVE, M0_BTS_FAILED),
+	},
+	[M0_BTS_OPENING] = {
+		.sd_flags     = 0,
+		.sd_name      = "M0_BTS_OPENING",
+		.sd_in        = NULL,
+		.sd_ex        = NULL,
+		.sd_invariant = tx_state_invariant,
+		.sd_allowed   = M0_BITS(M0_BTS_ACTIVE, M0_BTS_FAILED),
 	},
 	[M0_BTS_ACTIVE] = {
 		.sd_flags     = 0,
-- 
1.8.3.2

