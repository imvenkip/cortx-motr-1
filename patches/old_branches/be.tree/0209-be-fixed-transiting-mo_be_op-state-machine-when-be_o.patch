From 8cf3adc5579dfabcf982b2c1e9d4ff6d1bf9b28d Mon Sep 17 00:00:00 2001
From: Anatoliy Bilenko <anatoliy_bilenko@xyratex.com>
Date: Fri, 21 Jun 2013 16:42:35 +0300
Subject: [PATCH 209/290] be: fixed transiting mo_be_op state machine when
 be_op is already ready.

---
 be/be.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/be/be.c b/be/be.c
index cf97980..ed4dc9a 100644
--- a/be/be.c
+++ b/be/be.c
@@ -126,6 +126,7 @@ M0_INTERNAL int m0_be_op_tick_ret(struct m0_be_op *op, struct m0_fom *fom,
 
 	if (M0_IN(op->bo_sm.sm_state, (M0_BOS_SUCCESS, M0_BOS_FAILURE))) {
 		m0_sm_group_unlock(op->bo_sm.sm_grp);
+		m0_fom_phase_set(fom, next_state);
 		return M0_FSO_AGAIN;
 	}
 
-- 
1.8.3.2

