From 4ad5b3fa4e2b4bc01518d40d8838978812c13e0c Mon Sep 17 00:00:00 2001
From: Yuriy Umanets <yuriy_umanets@xyratex.com>
Date: Fri, 8 Apr 2011 10:23:01 -0600
Subject: [PATCH 050/177] - fixed bug in c2_md_store_create_attr(). nsrec eas
 zeroed out aftre setting fids.

---
 mdstore/mdstore.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/mdstore/mdstore.c b/mdstore/mdstore.c
index 614087c..415c9c2 100644
--- a/mdstore/mdstore.c
+++ b/mdstore/mdstore.c
@@ -181,15 +181,15 @@ int c2_md_store_create(struct c2_md_store *md,
         C2_ASSERT(pcob != NULL);
         C2_ASSERT(cob != NULL);
         
+        C2_SET0(&nsrec);
+        C2_SET0(&fabrec);
+        C2_SET0(&omgrec);
+
         c2_md_store_make_nskey(&nskey, &pcob->co_fid, 
                                req->c_name.n_name, 
                                req->c_name.n_count);
         c2_md_make_fid(&nsrec.cnr_fid, &body->b_tfid);
 
-        C2_SET0(&nsrec);
-        C2_SET0(&fabrec);
-        C2_SET0(&omgrec);
-
         /*
          * Create case, nlink == 0, will be bumped by c2_cob_create()
          * where needed.
-- 
1.8.3.2

