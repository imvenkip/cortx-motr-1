From c8ca43165180158f2723397d55af8acf38556c15 Mon Sep 17 00:00:00 2001
From: Yuriy Umanets <yuriy_umanets@xyratex.com>
Date: Fri, 29 Jul 2011 08:11:34 -0600
Subject: [PATCH 170/177] - built compile warnings

---
 ioservice/io_foms.c        | 10 +++++-----
 lib/user_space/processor.c |  2 +-
 mdstore/mdstore.c          |  4 ++--
 xdr/xdr_rec.c              |  4 ++++
 4 files changed, 12 insertions(+), 8 deletions(-)

diff --git a/ioservice/io_foms.c b/ioservice/io_foms.c
index 61fee6a..5e4b0fb 100644
--- a/ioservice/io_foms.c
+++ b/ioservice/io_foms.c
@@ -193,11 +193,11 @@ int c2_io_fom_cob_rwv_state(struct c2_fom *fom)
 	c2_bcount_t			 count;
 	c2_bindex_t			 offset;
 	struct c2_clink			 clink;
-	int				 rc;
-	struct c2_fop_cob_writev	*write_fop;
-	struct c2_fop_cob_readv		*read_fop;
-	struct c2_fop_cob_writev_rep	*wr_rep_fop;
-	struct c2_fop_cob_readv_rep	*rd_rep_fop;
+	int				 rc = 0;
+	struct c2_fop_cob_writev	*write_fop = NULL;
+	struct c2_fop_cob_readv		*read_fop = NULL;
+	struct c2_fop_cob_writev_rep	*wr_rep_fop = NULL;
+	struct c2_fop_cob_readv_rep	*rd_rep_fop = NULL;
 
 	C2_PRE(fom != NULL);
 
diff --git a/lib/user_space/processor.c b/lib/user_space/processor.c
index 36ccf31..b866ba8 100644
--- a/lib/user_space/processor.c
+++ b/lib/user_space/processor.c
@@ -241,7 +241,7 @@ static int c2_processor_set_map_type(enum map map_type)
 
 	FILE	*fp;
 
-	struct c2_bitmap *pbitmap;
+	struct c2_bitmap *pbitmap = NULL;
 
 	switch (map_type) {
 	case C2_PROCESSORS_POSS_MAP :
diff --git a/mdstore/mdstore.c b/mdstore/mdstore.c
index b7e2ca0..cdb8ff9 100644
--- a/mdstore/mdstore.c
+++ b/mdstore/mdstore.c
@@ -567,10 +567,10 @@ int c2_md_store_readdir(struct c2_md_store      *md,
         struct c2_cob_iterator         it;
         struct c2_dirent              *ent;
         struct c2_dirent              *last = NULL;
-        char                          *name;
+        char                          *name = ".";
         int                            nob;
         int                            recsize;
-        int                            len;
+        int                            len = 1;
         int                            first;
         int                            second;
         int                            rc;
diff --git a/xdr/xdr_rec.c b/xdr/xdr_rec.c
index 55ac865..d0581d6 100644
--- a/xdr/xdr_rec.c
+++ b/xdr/xdr_rec.c
@@ -80,8 +80,12 @@
 # include <libio/iolibio.h>
 #endif
 
+#ifndef htonl
 #define htonl(x) c2_le(x)
+#endif
+#ifndef ntohl
 #define ntohl(x) c2_le(x)
+#endif
 
 #define MIN_MSG_SIZE 100
 #define DEFAULT_MSG_SIZE 4000
-- 
1.8.3.2

