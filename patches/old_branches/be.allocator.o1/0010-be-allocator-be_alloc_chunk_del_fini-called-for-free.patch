From e42fba24b13822ad4c25c2c9445a7cd13ddb4198 Mon Sep 17 00:00:00 2001
From: Maxim Medved <max_medved@xyratex.com>
Date: Fri, 15 Nov 2013 00:58:57 +0200
Subject: [PATCH 10/96] be/allocator: be_alloc_chunk_del_fini() called for free
 chunks only

---
 be/alloc.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/be/alloc.c b/be/alloc.c
index ac8085f..a48f05c 100644
--- a/be/alloc.c
+++ b/be/alloc.c
@@ -424,8 +424,7 @@ static void be_alloc_chunk_del_fini(struct m0_be_allocator *a,
 				    struct be_alloc_chunk *c)
 {
 	M0_PRE(be_alloc_chunk_invariant(a, c));
-	if (c->bac_free)
-		chunks_free_tlist_del_c(a, tx, c);
+	chunks_free_tlist_del_c(a, tx, c);
 	chunks_all_tlist_del_c(a, tx, c);
 	chunks_free_tlink_fini_c(a, tx, c);
 	chunks_all_tlink_fini_c(a, tx, c);
-- 
1.8.3.2

