From 2a12d0b56641f60f0aed78ba28cbde6c1c6a7cf8 Mon Sep 17 00:00:00 2001
From: "Valery V. Vorotyntsev" <valery_vorotyntsev@xyratex.com>
Date: Mon, 4 Mar 2013 12:50:52 +0200
Subject: [PATCH 01/63] rpc/ub/README: new file

Currently the file contains design notes.
---
 rpc/ub/README | 53 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 53 insertions(+)
 create mode 100644 rpc/ub/README

diff --git a/rpc/ub/README b/rpc/ub/README
new file mode 100644
index 0000000..36bcf7f
--- /dev/null
+++ b/rpc/ub/README
@@ -0,0 +1,53 @@
+A set of RPC benchmarks measures data needed for the following plots:
+
+  - rate (in messages per second) vs. number of connections;
+  - rate vs. number of slots (concurrency);
+  - rate vs. message length (in bytes);
+  - processor utilisation vs. number of connections.
+
+*Note*: It is important to push along X axis (possibly
+logarithmically) until the peak is found.
+
+*Note*: Expected number of connections per rpc machine --- up to tens
+of millions.
+
+                          +--------------+
+     num. of connections  |              |
+    --------------------->|              |   rate (MPS)
+                          |              +---------------->
+     num. of slots        |              |
+    --------------------->|    rpc-ub    |
+                          |              |   CPU load (%)
+     message length       |              +---------------->
+    --------------------->|              |
+                          |              |
+                          +--------------+
+
+		      Fig. 1  Inputs and outputs
+
+*Note*: 1) Ask Max how did he measure rate. 2) Use some "sent"
+callback for rate measurement.
+
+
+       +-------+                                  +-------+
+       |  rpc  |                                  |  rpc  |
+       +---+---+                                  +---+---+
+           |                                          |
+       +---+---+                                  +---+---+
+       |  net  |                                  |  net  |
+       +---+---+            "the pipe"            +---+---+
+           |       +-------+          +-------+       |
+           +-------|  mem  |----------|  mem  |-------+
+                   +-------+          +-------+
+           x                                          x
+           |                                          |
+       +---+---+                                  +---+---+
+       | LNet  |                                  | LNet  |
+       +---+---+                                  +---+---+
+           |                    IB                    |
+           +------------------------------------------+
+
+		     Fig. 2  Subsystems stack
+
+*Note*: Measure "sending" and "receiving" sides separately.
+*Note*: Keep statistics in memory. Output upon benchmark completion.
-- 
1.8.3.2

