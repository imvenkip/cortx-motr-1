From 593047ff73ee2d6fe1542a8925aa773c78c7f136 Mon Sep 17 00:00:00 2001
From: Yuriy Umanets <yuriy_umanets@xyratex.com>
Date: Wed, 26 Jan 2011 03:57:24 -0700
Subject: [PATCH 07/91] - killed OS checks from Makefiles

---
 addb/linux_kernel/Makefile.in    | 12 ------------
 build_kernel_modules/Makefile.in | 13 -------------
 c2t1fs/Makefile.in               | 12 ------------
 db/linux_kernel/Makefile.in      | 12 ------------
 fop/linux_kernel/Makefile.in     | 12 ------------
 lib/linux_kernel/Makefile.in     | 12 ------------
 net/ksunrpc/Makefile.in          | 12 ------------
 7 files changed, 85 deletions(-)

diff --git a/addb/linux_kernel/Makefile.in b/addb/linux_kernel/Makefile.in
index 721f78a..51c0768 100644
--- a/addb/linux_kernel/Makefile.in
+++ b/addb/linux_kernel/Makefile.in
@@ -1,8 +1,5 @@
-OS = @OS@
 ADDB_SRCDIR = @SRCDIR@/addb/linux_kernel
 
-ifeq ($(OS),linux)
-
 obj-m       := kaddb.o
 shared_src  := addb.c
 kernel_src  := addb_console.c
@@ -24,15 +21,6 @@ clean distclean:
 	$(RM) $(shared_src) Module.markers Module.symvers modules.order
 	$(MAKE) -C @LINUX_OBJ@ M=`pwd` clean
 
-else
-
-all:
-install:
-uninstall:
-distclean clean:
-
-endif
-
 distdir:
 	cp $(ADDB_SRCDIR)/Makefile.in $(ADDB_SRCDIR)/addb_console.c \
 @top_builddir@/@PACKAGE@-@VERSION@/addb/linux_kernel
diff --git a/build_kernel_modules/Makefile.in b/build_kernel_modules/Makefile.in
index 6bf26ff..c27adba 100644
--- a/build_kernel_modules/Makefile.in
+++ b/build_kernel_modules/Makefile.in
@@ -1,5 +1,3 @@
-OS = @OS@
-
 C2T1FS_SRCDIR = @SRCDIR@/c2t1fs
 KSUNRPC_SRCDIR = @SRCDIR@/net/ksunrpc
 FOPDIR = @SRCDIR@/fop
@@ -9,8 +7,6 @@ subdirs := ../net/ksunrpc/ ../lib/linux_kernel/ \
            ../fop/linux_kernel/ ../addb/linux_kernel/ \
 	   ../db/linux_kernel/ ../c2t1fs/
 
-ifeq ($(OS),linux)
-
 obj-y += $(subdirs)
 
 all:
@@ -27,15 +23,6 @@ install modules_install:
 uninstall:
 	for s in $(subdirs) ;do $(MAKE) -C $$s uninstall ;done
 
-else
-
-all:
-install:
-uninstall:
-distclean clean:
-
-endif
-
 dist distdir:
 	for s in $(subdirs) ;do $(MAKE) -C $$s distdir ;done
 
diff --git a/c2t1fs/Makefile.in b/c2t1fs/Makefile.in
index d87db87..86ccf50 100644
--- a/c2t1fs/Makefile.in
+++ b/c2t1fs/Makefile.in
@@ -1,10 +1,7 @@
-OS = @OS@
 C2T1FS_SRCDIR = @SRCDIR@/c2t1fs
 FOPDIR = @SRCDIR@/fop
 STOBDIR = @SRCDIR@/stob/ut
 
-ifeq ($(OS),linux)
-
 obj-m := c2t1fs.o c2t1fs_loop.o 
 c2t1fs-y := main.o io_fop_init.o io_k.o
 
@@ -24,15 +21,6 @@ distclean clean:
 	$(MAKE) -C @LINUX_OBJ@ M=`pwd` clean;
 	rm -fr Module.symvers io_k.[ch] io_fop_init.c
 
-else
-
-all:
-install:
-uninstall:
-distclean clean:
-
-endif
-
 distdir:
 	cp $(C2T1FS_SRCDIR)/Makefile.in $(C2T1FS_SRCDIR)/c2t1fs.h \
 $(C2T1FS_SRCDIR)/c2t1fs_loop.c $(C2T1FS_SRCDIR)/main.c \
diff --git a/db/linux_kernel/Makefile.in b/db/linux_kernel/Makefile.in
index 0f2605f..5259e68 100644
--- a/db/linux_kernel/Makefile.in
+++ b/db/linux_kernel/Makefile.in
@@ -1,8 +1,5 @@
-OS = @OS@
 DB_SRCDIR = @SRCDIR@/db/linux_kernel
 
-ifeq ($(OS),linux)
-
 obj-m       := kdb.o
 shared_src  := db_common.c
 kernel_src  := db.c
@@ -24,15 +21,6 @@ clean distclean:
 	$(RM) $(shared_src) Module.markers Module.symvers modules.order
 	$(MAKE) -C @LINUX_OBJ@ M=`pwd` clean
 
-else
-
-all:
-install:
-uninstall:
-distclean clean:
-
-endif
-
 distdir:
 	cp $(DB_SRCDIR)/Makefile.in $(DB_SRCDIR)/db.c $(DB_SRCDIR)/db_impl.h \
            @top_builddir@/@PACKAGE@-@VERSION@/db/linux_kernel
diff --git a/fop/linux_kernel/Makefile.in b/fop/linux_kernel/Makefile.in
index 67e1d66..c687bc7 100644
--- a/fop/linux_kernel/Makefile.in
+++ b/fop/linux_kernel/Makefile.in
@@ -1,8 +1,5 @@
-OS = @OS@
 FOP_SRCDIR = @SRCDIR@/fop/linux_kernel
 
-ifeq ($(OS),linux)
-
 obj-m       := kfop.o
 shared_src  := fop.c fop_format.c
 kernel_src  := fop_kernel.c
@@ -24,15 +21,6 @@ clean distclean:
 	$(RM) $(shared_src) Module.markers Module.symvers modules.order
 	$(MAKE) -C @LINUX_OBJ@ M=`pwd` clean
 
-else
-
-all:
-install:
-uninstall:
-distclean clean:
-
-endif
-
 distdir:
 	cp $(FOP_SRCDIR)/Makefile.in $(FOP_SRCDIR)/fop_kernel.c $(FOP_SRCDIR)/fop_kernel.h \
            @top_builddir@/@PACKAGE@-@VERSION@/fop/linux_kernel
diff --git a/lib/linux_kernel/Makefile.in b/lib/linux_kernel/Makefile.in
index 83e7585..9b1b42b 100644
--- a/lib/linux_kernel/Makefile.in
+++ b/lib/linux_kernel/Makefile.in
@@ -1,8 +1,5 @@
-OS = @OS@
 LIB_SRCDIR = @SRCDIR@/lib/linux_kernel
 
-ifeq ($(OS),linux)
-
 obj-m       := klibc2.o
 shared_src  := vec.c list.c queue.c refs.c
 kernel_src  := memory.c mutex.c refs.c rwlock.c
@@ -24,15 +21,6 @@ clean distclean:
 	$(RM) $(shared_src) Module.markers Module.symvers modules.order
 	$(MAKE) -C @LINUX_OBJ@ M=`pwd` clean
 
-else
-
-all:
-install:
-uninstall:
-distclean clean:
-
-endif
-
 distdir:
 	cp $(LIB_SRCDIR)/Makefile.in \
 	$(LIB_SRCDIR)/memory.c $(LIB_SRCDIR)/mutex.c \
diff --git a/net/ksunrpc/Makefile.in b/net/ksunrpc/Makefile.in
index 95dc1b2..6b8e125 100644
--- a/net/ksunrpc/Makefile.in
+++ b/net/ksunrpc/Makefile.in
@@ -1,7 +1,4 @@
 KSUNRPC_SRCDIR = @SRCDIR@/net/ksunrpc
-OS=@OS@
-
-ifeq ($(OS),linux)
 
 obj-m := ksunrpc.o
 shared_src  := connection.c net.c net_cli.c net_utils.c
@@ -24,15 +21,6 @@ distclean clean:
 	$(MAKE) -C @LINUX_OBJ@ M=`pwd` clean;
 	rm -fr $(shared_src) Module.symvers
 
-else
-
-all:
-install:
-uninstall:
-distclean clean:
-
-endif
-
 distdir:
 	cp $(KSUNRPC_SRCDIR)/Makefile.in $(KSUNRPC_SRCDIR)/ksunrpc.h \
            $(KSUNRPC_SRCDIR)/kxdr.c $(KSUNRPC_SRCDIR)/client.c \
-- 
1.8.3.2

